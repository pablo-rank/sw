<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>service worker</title>
    <link href="style.css" rel="stylesheet">
    <script src="index.js" defer></script>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="manifest" href="https://storage.googleapis.com/workbox-cdn/releases/6.1.1/workbox-window.prod.mjs">
  </head>
  <body>
    <img src="images/fox1.jpg" alt="a foxy picture">
    <button class="add-button">Add to home screen</button>
    <script type="module">
    // This code sample uses features introduced in Workbox v6.
    import {Workbox, messageSW} from 'https://storage.googleapis.com/workbox-cdn/releases/6.1.1/workbox-window.prod.mjs';

    if ('serviceWorker' in navigator) {
      console.log("Â·djdjd");
      const wb = new Workbox('/sw.js');
      let registration;

      const showSkipWaitingPrompt = (event) => {
        // `event.wasWaitingBeforeRegister` will be false if this is
        // the first time the updated service worker is waiting.
        // When `event.wasWaitingBeforeRegister` is true, a previously
        // updated service worker is still waiting.
        // You may want to customize the UI prompt accordingly.

        // Assumes your app has some sort of prompt UI element
        // that a user can either accept or reject.
        const prompt = createUIPrompt({
          onAccept: () => {
            // Assuming the user accepted the update, set up a listener
            // that will reload the page as soon as the previously waiting
            // service worker has taken control.
            wb.addEventListener('controlling', (event) => {
              window.location.reload();
            });

            messageSkipWaiting();
          },

          onReject: () => {
            prompt.dismiss();
          }
        });
      };

      // Add an event listener to detect when the registered
      // service worker has installed but is waiting to activate.
      wb.addEventListener('waiting', showSkipWaitingPrompt);

      wb.register();
    }
    </script>
  </body>
</html>
